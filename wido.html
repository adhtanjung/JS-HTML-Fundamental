<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Exercise9</title>
</head>
<style>
    table,
    th,
    td {
        border: 1px solid black;
        border-collapse: collapse;
        padding: 10px;
    }

    fieldset {
        margin-left: 300px;
        margin-right: 300px;
    }
</style>
<script>
    let arrProduct = [];

    function showProduct(arr) {
        // Map = Bisa menggantikan for loop, function ES6
        var output = arr.map(function (val) {
            return `
          <tr>
            <td>${val.id}</td>
            <td>${val.category}</td>
            <td>${val.name}</td>
            <td>${val.price}</td>
            <td>${val.stock}</td>
          </tr>

          `;
        });
        console.log(output);
        return (document.getElementById("output").innerHTML = output.join(""));
    }

    function tambah() {
        var date = new Date();
        let id = date.getTime();
        let name = document.getElementById("name").value;
        let price = document.getElementById("price").value;
        let category = document.getElementById("category").value;
        let stock = document.getElementById("stock").value;
        console.log(name, price, category, stock);

        arrProduct.push({
            id,
            category,
            name,
            price,
            stock,
        });

        showProduct(arrProduct);
    }

    function search() {
        var inputNama = document.getElementById("inputNama").value;
        var newArray = arrProduct.filter(function (val) {
            return val.name.includes(inputNama);
        });
        console.log(newArray);
        showProduct(newArray);
    }

    function filterHarga() {
        var harga1 = document.getElementById("harga1").value;
        var harga2 = document.getElementById("harga2").value;
        var newArray = arrProduct.filter(function (val) {
            return val.price >= harga1 || val.price <= harga2;
        });
        console.log(newArray);
        showProduct(newArray);
    }

    function filterkategori() {
        var kategoriF = document.getElementById("categoryFilter").value;
        var newArray = arrProduct.filter(function (val) {
            if (kategoriF == "") {
                return val;
            } else {
                return val.category == kategoriF;
            }
        });
        console.log(newArray);
        showProduct(newArray);
    }
</script>

<body>
    <fieldset>
        <legend><b>Filter</b></legend>
        <p>
            Nama:
            <input type="text" id="inputNama" oninput="search()" placeholder="Search" />
        </p>
        <p>
            Harga:
            <input type="number" id="harga1" placeholder="Minimum" oninput="filterHarga()" />
            -
            <input type="number" id="harga2" placeholder="Maksimum" oninput="filterHarga()" />
        </p>
        <p>
            Kategori:
            <select name="kategori" id="categoryFilter" onchange="filterkategori()">
                <option value="">All</option>
                <option value="Fast Food">Fast Food</option>
                <option value="Electronic">Electronic</option>
                <option value="Cloth">Cloth</option>
                <option value="Fruit">Fruit</option>
            </select>
        </p>
    </fieldset>
    <fieldset>
        <legend><b>Input Data</b></legend>
        <thead>
            <tr>
                <th><input type="text" placeholder="Name" id="name" /></th>
                <th><input type="number" placeholder="Price" id="price" /></th>
                <th>
                    <select name="kategori" id="category">
                        <option value="" disabled selected>Select Category</option>
                        <option value="Fast Food">Fast Food</option>
                        <option value="Electronic">Electronic</option>
                        <option value="Cloth">Cloth</option>
                        <option value="Fruit">Fruit</option>
                    </select>
                </th>
                <th><input type="number" placeholder="Stock" id="stock" /></th>
                <p><button onclick="tambah()">Input</button></p>
            </tr>
        </thead>
    </fieldset>
    <fieldset>
        <legend><b>Tabel Data</b></legend>
        <table id="tableOutput">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Category</th>
                    <th>Name</th>
                    <th>Price</th>
                    <th>Stock</th>
                    <th>Buy</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody id="output"></tbody>
        </table>
    </fieldset>
</body>

</html>